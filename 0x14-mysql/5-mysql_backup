#!/usr/bin/env bash
# backup and compress my databases
if [ $# -ne 1 ]; then
  echo "Usage: $0 <mysql_password>"
  exit 1
fi

DATE=$(date +'%d-%m-%Y')
MYSQL_DUMP_FILENAME="backup.sql"
ARCHIVE_NAME="${DATE}.tar.gz"
MYSQL_USER="root"
MYSQL_PASSWORD="$1"
BACKUP_DIR="/path/to/backup/directory"

mkdir -p "$BACKUP_DIR"
mysqldump -u "$MYSQL_USER" -p"$MYSQL_PASSWORD" --all-databases > "$BACKUP_DIR/$MYSQL_DUMP_FILENAME"
tar -czf "$BACKUP_DIR/$ARCHIVE_NAME" -C "$BACKUP_DIR" "$MYSQL_DUMP_FILENAME"
rm "$BACKUP_DIR/$MYSQL_DUMP_FILENAME"
echo "Backup completed successfully. Archive: $BACKUP_DIR/$ARCHIVE_NAME"
